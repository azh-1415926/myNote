# **Linux 系统编程笔记**
## **Linux 用户与用户组管理**
Linux系统是一个多用户多任务的分时操作系统，任何一个要使用系统资源的用户，都必须首先向系统管理员申请一个账号，然后以这个账号的身份进入系统

每个用户账号都拥有一个唯一的用户名和各自的口令

用户在登录时键入正确的用户名和口令后，就能够进入系统和自己的主目录

实现用户账号的管理，要完成的工作主要有如下几个方面
* 用户账号的添加、删除与修改
* 用户口令的管理
* 用户组的管理
### **一、Linux 系统用户账号的管理**
用户账号的管理工作主要涉及到用户账号的添加、修改和删除

添加用户账号就是在系统中创建一个新账号，然后为新账号分配用户号、用户组、主目录和登录Shell等资源。刚添加的账号是被锁定的，无法使用
1. ### 添加新用户 `useradd` 命令
    * `useradd 用户名` 创建一个新用户
    * 具体参数
        * `-c comment` 指定一段注释性描述
        * `-d 目录` 指定用户主目录，如果此目录不存在，则同时使用-m选项，可以创建主目录
        * `-g 用户组` 指定用户所属的用户组
        * `-G 用户组,用户组` 指定用户所属的附加组
        * `-s Shell文件` 指定用户的登录Shell
        * `-u 用户号` 指定用户的用户号，如果同时有-o选项，则可以重复使用其他用户的标识号
2. ### 删除用户 `userdel` 命令
    * 如果一个用户的账号不再使用，可以从系统中删除,删除用户账号就是要将/etc/passwd等系统文件中的该用户记录删除，必要时还删除用户的主目录
    * 常用的选项是 -r，它的作用是把用户的主目录一起删除

3. ### 修改用户 `usermod` 命令
    * 修改用户账号就是根据实际情况更改用户的有关属性，如用户号、主目录、用户组、登录Shell等
    * 常用的选项包括-c, -d, -m, -g, -G, -s, -u以及-o等，这些选项的意义与useradd命令中的选项一样，可以为用户指定新的资源值
4. ### 管理用户口令 `passwd` 命令
* 用户管理的一项重要内容是用户口令的管理，用户账号刚创建时没有口令，但是被系统锁定，无法使用，必须为其指定口令后才可以使用，即使是指定空口令，指定和修改用户口令的Shell命令是passwd
* 超级用户可以为自己和其他用户指定口令，普通用户只能用它修改自己的口令
* 具体参数
    * -l 锁定口令，即禁用账号
    * -u 口令解锁
    * -d 使账号无口令
    * -f 强迫用户下次登录时修改口令
* 普通用户修改自己的口令时，passwd命令会先询问原口令，验证后再要求用户输入两遍新口令，如果两次输入的口令一致，则将这个口令指定给用户；而超级用户为用户指定口令时，就不需要知道原口令
### **二、Linux 系统用户组的管理**
每个用户都有一个用户组，系统可以对一个用户组中的所有用户进行集中管理

不同Linux 系统对用户组的规定有所不同，如Linux下的用户属于与它同名的用户组，这个用户组在创建用户时同时创建

用户组的管理涉及用户组的添加、删除和修改，组的增加、删除和修改实际上就是对/etc/group文件的更新
1. ### 添加用户组 `groupadd` 命令
    * 相关参数
        * -g GID 指定新用户组的组标识号（GID）
        * -o 一般与-g选项同时使用，表示新用户组的GID可以与系统已有用户组的GID相同
2. ### 删除用户组 `groupdel` 命令
    * 暂无相关参数
3. ### 修改用户组 `groupmod` 命令
    * 相关参数
        * -g GID 为用户组指定新的组标识号
        * -o 与-g选项同时使用，用户组的新GID可以与系统已有用户组的GID相同
        * -n 新用户组 将用户组的名字改为新名字
4. ### 切换用户组 `newgrp` 命令
用户可以在登录后，使用命令newgrp切换到其他用户组，这个命令的参数就是目的用户组，这条命令将当前用户切换到root用户组，前提条件是root用户组确实是该用户的主组或附加组
### **三、与用户账号有关的系统文件**
完成用户管理的工作有许多种方法，但是每一种方法实际上都是对有关的系统文件进行修改

与用户和用户组相关的信息都存放在一些系统文件中，这些文件包括/etc/passwd, /etc/shadow, /etc/group等